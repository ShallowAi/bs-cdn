(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{133:function(e,n,t){"use strict";var a=t(0);function i(e,n,t,a,i,s,l){try{var r=e[s](l),o=r.value}catch(e){return void t(e)}r.done?n(o):Promise.resolve(o).then(a,i)}n.a=a.default.extend({data:()=>({plugins:[]}),methods:{enablePlugin(e){var n,t=this;return(n=function*(){let n=e.name,a=e.dependencies.requirements,i=e.originalIndex;if(0===a.length)try{yield t.$confirm(t.$t("admin.noDependenciesNotice"),{type:"warning"})}catch(e){return}const s=yield t.$http.post("/admin/plugins/manage",{action:"enable",name:n}),l=s.errno,r=s.msg,o=s.reason;if(0===l)t.$message.success(r),t.$set(t.plugins[i],"enabled",!0);else{const e=document.createElement("div"),n=document.createElement("p");n.textContent=r,e.appendChild(n);const a=document.createElement("ul");o.forEach(e=>{const n=document.createElement("li");n.textContent=e,a.appendChild(n)}),e.appendChild(a),t.$alert(e.innerHTML.replace(/`([\w-_]+)`/g,"<code>$1</code>"),{dangerouslyUseHTMLString:!0,type:"warning"})}},function(){var e=this,t=arguments;return new Promise(function(a,s){var l=n.apply(e,t);function r(e){i(l,a,s,r,o,"next",e)}function o(e){i(l,a,s,r,o,"throw",e)}r(void 0)})})()}}})},372:function(e,n,t){"use strict";t.r(n);var a=t(83),i=(t(78),t(133)),s=t(69);function l(e,n,t,a,i,s,l){try{var r=e[s](l),o=r.value}catch(e){return void t(e)}r.done?n(o):Promise.resolve(o).then(a,i)}function r(e){return function(){var n=this,t=arguments;return new Promise(function(a,i){var s=e.apply(n,t);function r(e){l(s,a,i,r,o,"next",e)}function o(e){l(s,a,i,r,o,"throw",e)}r(void 0)})}}var o={name:"Market",components:{VueGoodTable:a.a},mixins:[i.a,s.a],data(){return{plugins:[],columns:[{field:"title",label:this.$t("admin.pluginTitle")},{field:"description",label:this.$t("admin.pluginDescription"),sortable:!1,width:"37%"},{field:"author",label:this.$t("admin.pluginAuthor")},{field:"version",label:this.$t("admin.pluginVersion"),sortable:!1,globalSearchDisabled:!0},{field:"dependencies",label:this.$t("admin.pluginDependencies"),sortable:!1,globalSearchDisabled:!0},{field:"operations",label:this.$t("admin.operationsTitle"),sortable:!1,globalSearchDisabled:!0}],installing:""}},beforeMount(){this.fetchData()},methods:{fetchData(){var e=this;return r(function*(){e.plugins=yield e.$http.get("/admin/plugins/market-data")})()},installPlugin(e){var n=this;return r(function*(){let t=e.name,a=e.originalIndex;n.installing=t;const i=yield n.$http.post("/admin/plugins/market/download",{name:t}),s=i.errno,l=i.msg;0===s?(n.$message.success(l),n.plugins[a].update_available=!1,n.plugins[a].installed=!0):n.$message.warning(l),n.installing=""})()},updatePlugin(e){var n=this;return r(function*(){try{yield n.$confirm(n.$t("admin.confirmUpdate",{plugin:e.title,old:e.installed,new:e.version}))}catch(e){return}n.installPlugin(e)})()}}},d=t(58),u=Object(d.a)(o,function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("section",{staticClass:"content"},[t("vue-good-table",{attrs:{rows:e.plugins,columns:e.columns,"search-options":e.tableOptions.search,"pagination-options":e.tableOptions.pagination,"style-class":"vgt-table striped"},scopedSlots:e._u([{key:"table-row",fn:function(n){return["title"===n.column.field?t("span",[t("strong",[e._v(e._s(n.formattedRow[n.column.field]))]),e._v(" "),t("div",[e._v(e._s(n.row.name))])]):"dependencies"===n.column.field?t("span",[0===n.row.dependencies.requirements.length?t("span",[t("i",{directives:[{name:"t",rawName:"v-t",value:"admin.noDependencies",expression:"'admin.noDependencies'"}]})]):t("div",e._l(n.row.dependencies.requirements,function(a,i){return t("span",{key:i,staticClass:"label",class:"bg-"+(i in n.row.dependencies.unsatisfiedRequirements?"red":"green")},[e._v("\n            "+e._s(i)+": "+e._s(a)+"\n            "),t("br")])}),0)]):"operations"===n.column.field?t("span",[n.row.installed?[n.row.update_available?t("el-button",{attrs:{type:"success",size:"medium",disabled:e.installing===n.row.name},on:{click:function(t){return e.updatePlugin(n.row)}}},[e.installing===n.row.name?[t("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" "+e._s(e.$t("admin.pluginUpdating"))+"\n            ")]:[t("i",{staticClass:"fas fa-sync-alt"}),e._v(" "+e._s(e.$t("admin.updatePlugin"))+"\n            ")]],2):n.row.enabled?t("el-button",{attrs:{type:"primary",size:"medium",disabled:""}},[t("i",{staticClass:"fas fa-check"}),e._v(" "+e._s(e.$t("admin.statusEnabled"))+"\n          ")]):t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.enablePlugin(n.row)}}},[t("i",{staticClass:"fas fa-plug"}),e._v(" "+e._s(e.$t("admin.enablePlugin"))+"\n          ")])]:t("el-button",{attrs:{size:"medium",disabled:e.installing===n.row.name},on:{click:function(t){return e.installPlugin(n.row)}}},[e.installing===n.row.name?[t("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" "+e._s(e.$t("admin.pluginInstalling"))+"\n          ")]:[t("i",{staticClass:"fas fa-download"}),e._v(" "+e._s(e.$t("admin.installPlugin"))+"\n          ")]],2)],2):t("span",{domProps:{textContent:e._s(n.formattedRow[n.column.field])}})]}}])})],1)},[],!1,null,null,null);n.default=u.exports},69:function(e,n,t){"use strict";var a=t(0);n.a=a.default.extend({data(){return{tableOptions:{search:{enabled:!0,placeholder:this.$t("vendor.datatable.search")},pagination:{enabled:!0,nextLabel:this.$t("vendor.datatable.next"),prevLabel:this.$t("vendor.datatable.prev"),rowsPerPageLabel:this.$t("vendor.datatable.rowsPerPage"),allLabel:this.$t("vendor.datatable.all"),ofLabel:this.$t("vendor.datatable.of")}}}}})}}]);