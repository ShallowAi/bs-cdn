(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{107:function(e,t,s){"use strict";var n=s(0);function i(e,t,s,n,i,a,r){try{var o=e[a](r),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(n,i)}t.a=n.default.extend({methods:{setAsAvatar(){var e,t=this;return(e=function*(){try{yield t.$confirm(t.$t("user.setAvatarNotice"),t.$t("user.setAvatar"))}catch(e){return}const e=yield t.$http.post("/user/profile/avatar",{tid:t.tid}),s=e.errno,n=e.msg;0===s?(t.$message.success(n),Array.from(document.querySelectorAll('[alt="User Image"]')).forEach(e=>e.src+="?".concat((new Date).getTime()))):t.$message.warning(n)},function(){var t=this,s=arguments;return new Promise(function(n,a){var r=e.apply(t,s);function o(e){i(r,n,a,o,l,"next",e)}function l(e){i(r,n,a,o,l,"throw",e)}o(void 0)})})()}}})},108:function(e,t,s){"use strict";var n=s(75);s.n(n).a},109:function(e,t,s){(e.exports=s(7)(!1)).push([e.i,".player-item:not(:first-child){margin-top:10px}",""])},136:function(e,t,s){"use strict";var n=s(0);function i(e,t,s,n,i,a,r){try{var o=e[a](r),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(n,i)}t.a=n.default.extend({methods:{addClosetItem(){var e,t=this;return(e=function*(){let e;try{e=(yield t.$prompt(t.$t("skinlib.applyNotice"),{title:t.$t("skinlib.setItemName"),inputValue:t.name,showCancelButton:!0,inputValidator:e=>!!e||t.$t("skinlib.emptyItemName")})).value}catch(e){return}const s=yield t.$http.post("/user/closet/add",{tid:t.tid,name:e}),n=s.errno,i=s.msg;0===n?(t.$message.success(i),t.$emit("like-toggled",!0)):t.$message.warning(i)},function(){var t=this,s=arguments;return new Promise(function(n,a){var r=e.apply(t,s);function o(e){i(r,n,a,o,l,"next",e)}function l(e){i(r,n,a,o,l,"throw",e)}o(void 0)})})()}}})},139:function(e,t,s){var n=s(345);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,s(8).default)("391ba18d",n,!0,{})},142:function(e,t,s){"use strict";function n(e,t,s,n,i,a,r){try{var o=e[a](r),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function i(e){return function(){var t=this,s=arguments;return new Promise(function(i,a){var r=e.apply(t,s);function o(e){n(r,i,a,o,l,"next",e)}function l(e){n(r,i,a,o,l,"throw",e)}o(void 0)})}}var a={name:"ApplyToPlayerDialog",props:{skin:Number,cape:Number,allowAdd:{type:Boolean,default:!0}},data:()=>({players:[],selected:0}),methods:{fetchList(){var e=this;return i(function*(){e.players=yield e.$http.get("/user/player/list")})()},submit(){var e=this;return i(function*(){if(!e.selected)return e.$message.info(e.$t("user.emptySelectedPlayer"));if(!e.skin&&!e.cape)return e.$message.info(e.$t("user.emptySelectedTexture"));const t=yield e.$http.post("/user/player/set",{pid:e.selected,tid:{skin:e.skin||void 0,cape:e.cape||void 0}}),s=t.errno,n=t.msg;0===s?(e.$message.success(n),$("#modal-use-as").modal("hide")):e.$message.warning(n)})()},avatarUrl:e=>"".concat(blessing.base_url,"/avatar/35/").concat(e.tid_skin)}},r=(s(108),s(58)),o=Object(r.a)(a,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal fade",attrs:{id:"modal-use-as",tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),s("h4",{directives:[{name:"t",rawName:"v-t",value:"user.closet.use-as.title",expression:"'user.closet.use-as.title'"}],staticClass:"modal-title"})]),e._v(" "),s("div",{staticClass:"modal-body"},[0!==e.players.length?e._l(e.players,function(t){return s("div",{key:t.pid,staticClass:"player-item"},[s("label",{staticClass:"model-label",attrs:{for:t.pid}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],attrs:{type:"radio",name:"player"},domProps:{value:t.pid,checked:e._q(e.selected,t.pid)},on:{change:function(s){e.selected=t.pid}}}),e._v(" "),s("img",{attrs:{src:e.avatarUrl(t),width:"35",height:"35"}}),e._v(" "),s("span",[e._v(e._s(t.name))])])])}):s("p",{directives:[{name:"t",rawName:"v-t",value:"user.closet.use-as.empty",expression:"'user.closet.use-as.empty'"}]})],2),e._v(" "),s("div",{staticClass:"modal-footer"},[e.allowAdd?s("a",{directives:[{name:"t",rawName:"v-t",value:"user.closet.use-as.add",expression:"'user.closet.use-as.add'"}],staticClass:"el-button pull-left",attrs:{"data-toggle":"modal","data-target":"#modal-add-player"}}):e._e(),e._v(" "),s("el-button",{attrs:{type:"primary","data-test":"submit"},on:{click:e.submit}},[e._v("\n          "+e._s(e.$t("general.submit"))+"\n        ")])],1)])])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("Ã—")])])}],!1,null,null,null);t.a=o.exports},344:function(e,t,s){"use strict";var n=s(139);s.n(n).a},345:function(e,t,s){(e.exports=s(7)(!1)).push([e.i,".table>tbody>tr>td{border-top:0}",""])},370:function(e,t,s){"use strict";s.r(t);var n=s(107),i=s(136),a=s(84);function r(e,t,s,n,i,a,r){try{var o=e[a](r),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function o(e){return function(){var t=this,s=arguments;return new Promise(function(n,i){var a=e.apply(t,s);function o(e){r(a,n,i,o,l,"next",e)}function l(e){r(a,n,i,o,l,"throw",e)}o(void 0)})}}var l={name:"Show",components:{ApplyToPlayerDialog:s(142).a,Previewer:()=>Promise.all([s.e(2),s.e(1)]).then(s.bind(null,380))},mixins:[i.a,a.a,n.a],props:{baseUrl:{type:String,default:blessing.base_url}},data(){return{tid:+this.$route[1],name:"",type:"steve",likes:0,hash:"",uploader:0,size:0,uploadAt:"",public:!0,liked:blessing.extra.inCloset,canBeDownloaded:blessing.extra.download,currentUid:blessing.extra.currentUid,admin:blessing.extra.admin,uploaderNickName:blessing.extra.nickname,reportScore:blessing.extra.report}},computed:{auth(){return!!this.currentUid},togglePrivacyText(){return this.public?"skinlib.setAsPrivate":"skinlib.setAsPublic"},textureUrl(){return"".concat(this.baseUrl,"/textures/").concat(this.hash)}},beforeMount(){this.fetchData()},methods:{fetchData(){var e=this;return o(function*(){const t=yield e.$http.get("/skinlib/info/".concat(e.tid));e.name=t.name,e.type=t.type,e.likes=t.likes,e.hash=t.hash,e.uploader=t.uploader,e.size=t.size,e.uploadAt=t.upload_at,e.public=!!t.public})()},addToCloset(){var e=this;return o(function*(){e.$once("like-toggled",()=>{e.liked=!0,e.likes+=1}),yield e.addClosetItem()})()},removeFromCloset(){var e=this;return o(function*(){e.$once("item-removed",()=>{e.liked=!1,e.likes-=1}),yield e.removeClosetItem()})()},download(){const e=document.createElement("a");e.href="".concat(this.baseUrl,"/raw/").concat(this.tid,".png"),e.download="".concat(this.name,".png");const t=new MouseEvent("click");e.dispatchEvent(t)},changeTextureName(){var e=this;return o(function*(){let t;try{t=(yield e.$prompt(e.$t("skinlib.setNewTextureName"),{inputValue:e.name,inputValidator:t=>!!t||e.$t("skinlib.emptyNewTextureName")})).value}catch(e){return}const s=yield e.$http.post("/skinlib/rename",{tid:e.tid,new_name:t}),n=s.errno,i=s.msg;0===n?(e.name=t,e.$message.success(i)):e.$message.error(i)})()},changeModel(){var e=this;return o(function*(){const t=e.$createElement,s=t("div",null,[t("span",null,e.$t("skinlib.setNewTextureModel")),t("select",{attrs:{selectedIndex:0}},[t("option",{attrs:{value:"steve"}},"Steve"),t("option",{attrs:{value:"alex"}},"Alex"),t("option",{attrs:{value:"cape"}},e.$t("general.cape"))])]);try{yield e.$msgbox({message:s,showCancelButton:!0})}catch(e){return}const n=["steve","alex","cape"][s.children[1].elm.selectedIndex],i=yield e.$http.post("/skinlib/model",{tid:e.tid,model:n}),a=i.errno,r=i.msg;0===a?(e.type=n,e.$message.success(r)):e.$message.warning(r)})()},togglePrivacy(){var e=this;return o(function*(){try{yield e.$confirm(e.public?e.$t("skinlib.setPrivateNotice"):e.$t("skinlib.setPublicNotice"),{type:"warning"})}catch(e){return}const t=yield e.$http.post("/skinlib/privacy",{tid:e.tid}),s=t.errno,n=t.msg;0===s?(e.$message.success(n),e.public=!e.public):e.$message.warning(n)})()},deleteTexture(){var e=this;return o(function*(){try{yield e.$confirm(e.$t("skinlib.deleteNotice"),{type:"warning"})}catch(e){return}const t=yield e.$http.post("/skinlib/delete",{tid:e.tid}),s=t.errno,n=t.msg;0===s?(e.$message.success(n),setTimeout(()=>window.location="".concat(e.baseUrl,"/skinlib"),1e3)):e.$message.warning(n)})()},report(){var e=this;return o(function*(){const t=(()=>e.reportScore>0?e.$t("skinlib.report.positive",{score:e.reportScore}):e.reportScore<0?e.$t("skinlib.report.negative",{score:-e.reportScore}):"")();let s;try{s=(yield e.$prompt(t,{title:e.$t("skinlib.report.title"),inputPlaceholder:e.$t("skinlib.report.reason")})).value}catch(e){return}const n=yield e.$http.post("/skinlib/report",{tid:e.tid,reason:s}),i=n.errno,a=n.msg;0===i?e.$message.success(a):e.$message.warning(a)})()},fetchPlayersList(){this.$refs.useAs.fetchList()}}},c=(s(344),s(58)),d=Object(c.a)(l,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8"},[s("previewer",{attrs:{skin:"cape"!==e.type&&e.textureUrl,cape:"cape"===e.type?e.textureUrl:"","init-position-z":60},scopedSlots:e._u([{key:"footer",fn:function(){return[e.auth?[e.liked?s("el-button",{attrs:{type:"success",size:"medium","data-toggle":"modal","data-target":"#modal-use-as"},on:{click:e.fetchPlayersList}},[e._v("\n            "+e._s(e.$t("skinlib.apply"))+"\n          ")]):e._e(),e._v(" "),e.liked?s("el-button",{attrs:{type:"primary",size:"medium","data-test":"removeFromCloset"},on:{click:e.removeFromCloset}},[e._v("\n            "+e._s(e.$t("skinlib.removeFromCloset"))+"\n          ")]):s("el-button",{attrs:{type:"primary",size:"medium","data-test":"addToCloset"},on:{click:e.addToCloset}},[e._v("\n            "+e._s(e.$t("skinlib.addToCloset"))+"\n          ")]),e._v(" "),"cape"!==e.type?s("el-button",{attrs:{size:"medium","data-test":"setAsAvatar"},on:{click:e.setAsAvatar}},[e._v("\n            "+e._s(e.$t("user.setAsAvatar"))+"\n          ")]):e._e(),e._v(" "),e.canBeDownloaded?s("el-button",{attrs:{size:"medium","data-test":"download"},on:{click:e.download}},[e._v("\n            "+e._s(e.$t("skinlib.show.download"))+"\n          ")]):e._e(),e._v(" "),s("el-button",{attrs:{type:"warning",size:"medium","data-test":"report"},on:{click:e.report}},[e._v("\n            "+e._s(e.$t("skinlib.report.title"))+"\n          ")])]:s("el-button",{attrs:{disabled:"",title:e.$t("skinlib.show.anonymous")}},[e._v("\n          "+e._s(e.$t("skinlib.addToCloset"))+"\n        ")]),e._v(" "),s("div",{staticClass:"btn likes pull-right",staticStyle:{cursor:"auto"},style:{color:e.liked?"#e0353b":"#333"},attrs:{title:e.$t("skinlib.show.likes")}},[s("i",{staticClass:"fas fa-heart"}),e._v(" "),s("span",[e._v(e._s(e.likes))])])]},proxy:!0}])})],1),e._v(" "),s("div",{staticClass:"col-md-4"},[s("div",{staticClass:"box box-primary"},[s("div",{staticClass:"box-header with-border"},[s("h3",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.detail",expression:"'skinlib.show.detail'"}],staticClass:"box-title"})]),e._v(" "),s("div",{staticClass:"box-body"},[s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("td",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.name",expression:"'skinlib.show.name'"}]}),e._v(" "),s("td",[e._v("\n                "+e._s(e.name)+"\n                "),e.uploader===e.currentUid||e.admin?s("small",[s("a",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.edit",expression:"'skinlib.show.edit'"}],attrs:{href:"#"},on:{click:e.changeTextureName}})]):e._e()])]),e._v(" "),s("tr",[s("td",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.model",expression:"'skinlib.show.model'"}]}),e._v(" "),s("td",["cape"===e.type?[e._v(e._s(e.$t("general.cape")))]:[e._v(e._s(e.type))],e._v(" "),e.uploader===e.currentUid||e.admin?s("small",[s("a",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.edit",expression:"'skinlib.show.edit'"}],attrs:{href:"#"},on:{click:e.changeModel}})]):e._e()],2)]),e._v(" "),s("tr",[s("td",[e._v("Hash")]),e._v(" "),s("td",[s("span",{attrs:{title:e.hash}},[e._v(e._s(e.hash.slice(0,15))+"...")])])]),e._v(" "),s("tr",[s("td",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.size",expression:"'skinlib.show.size'"}]}),e._v(" "),s("td",[e._v(e._s(e.size)+" KB")])]),e._v(" "),s("tr",[s("td",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.uploader",expression:"'skinlib.show.uploader'"}]}),e._v(" "),null!==e.uploaderNickName?[s("td",[s("a",{attrs:{href:e.baseUrl+"/skinlib?filter="+("cape"===e.type?"cape":"skin")+"&uploader="+e.uploader}},[e._v(e._s(e.uploaderNickName))])])]:[s("td",[s("span",{directives:[{name:"t",rawName:"v-t",value:"general.unexistent-user",expression:"'general.unexistent-user'"}]})])]],2),e._v(" "),s("tr",[s("td",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.upload-at",expression:"'skinlib.show.upload-at'"}]}),e._v(" "),s("td",[e._v(e._s(e.uploadAt))])])])])])]),e._v(" "),e.auth?s("div",{staticClass:"box box-warning"},[s("div",{staticClass:"box-header with-border"},[s("h3",{directives:[{name:"t",rawName:"v-t",value:"admin.operationsTitle",expression:"'admin.operationsTitle'"}],staticClass:"box-title"})]),e._v(" "),s("div",{staticClass:"box-body"},[s("p",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.manage-notice",expression:"'skinlib.show.manage-notice'"}]})]),e._v(" "),s("div",{staticClass:"box-footer"},[s("el-button",{attrs:{type:"warning"},on:{click:e.togglePrivacy}},[e._v(e._s(e.$t(e.togglePrivacyText)))]),e._v(" "),s("el-button",{staticClass:"pull-right",attrs:{type:"danger"},on:{click:e.deleteTexture}},[e._v("\n          "+e._s(e.$t("skinlib.show.delete-texture"))+"\n        ")])],1)]):e._e()]),e._v(" "),s("apply-to-player-dialog",{ref:"useAs",attrs:{"allow-add":!1,skin:"cape"!==e.type?e.tid:0,cape:"cape"===e.type?e.tid:0}})],1)},[],!1,null,null,null);t.default=d.exports},58:function(e,t,s){"use strict";function n(e,t,s,n,i,a,r,o){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=s,c._compiled=!0),n&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=l):i&&(l=o?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}s.d(t,"a",function(){return n})},7:function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var s=function(e,t){var s=e[1]||"",n=e[3];if(!n)return s;if(t&&"function"==typeof btoa){var i=(r=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),a=n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"});return[s].concat(a).concat([i]).join("\n")}var r;return[s].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+s+"}":s}).join("")},t.i=function(e,s){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var a=this[i][0];null!=a&&(n[a]=!0)}for(i=0;i<e.length;i++){var r=e[i];null!=r[0]&&n[r[0]]||(s&&!r[2]?r[2]=s:s&&(r[2]="("+r[2]+") and ("+s+")"),t.push(r))}},t}},75:function(e,t,s){var n=s(109);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,s(8).default)("e7e7bc04",n,!0,{})},8:function(e,t,s){"use strict";function n(e,t){for(var s=[],n={},i=0;i<t.length;i++){var a=t[i],r=a[0],o={id:e+":"+i,css:a[1],media:a[2],sourceMap:a[3]};n[r]?n[r].parts.push(o):s.push(n[r]={id:r,parts:[o]})}return s}s.r(t),s.d(t,"default",function(){return m});var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},r=i&&(document.head||document.getElementsByTagName("head")[0]),o=null,l=0,c=!1,d=function(){},u=null,p="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(e,t,s,i){c=s,u=i||{};var r=n(e,t);return h(r),function(t){for(var s=[],i=0;i<r.length;i++){var o=r[i];(l=a[o.id]).refs--,s.push(l)}t?h(r=n(e,t)):r=[];for(i=0;i<s.length;i++){var l;if(0===(l=s[i]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete a[l.id]}}}}function h(e){for(var t=0;t<e.length;t++){var s=e[t],n=a[s.id];if(n){n.refs++;for(var i=0;i<n.parts.length;i++)n.parts[i](s.parts[i]);for(;i<s.parts.length;i++)n.parts.push(b(s.parts[i]));n.parts.length>s.parts.length&&(n.parts.length=s.parts.length)}else{var r=[];for(i=0;i<s.parts.length;i++)r.push(b(s.parts[i]));a[s.id]={id:s.id,refs:1,parts:r}}}}function f(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function b(e){var t,s,n=document.querySelector("style["+p+'~="'+e.id+'"]');if(n){if(c)return d;n.parentNode.removeChild(n)}if(v){var i=l++;n=o||(o=f()),t=_.bind(null,n,i,!1),s=_.bind(null,n,i,!0)}else n=f(),t=function(e,t){var s=t.css,n=t.media,i=t.sourceMap;n&&e.setAttribute("media",n);u.ssrId&&e.setAttribute(p,t.id);i&&(s+="\n/*# sourceURL="+i.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");if(e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}.bind(null,n),s=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else s()}}var g,y=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function _(e,t,s,n){var i=s?"":n.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var a=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}},84:function(e,t,s){"use strict";var n=s(0);function i(e,t,s,n,i,a,r){try{var o=e[a](r),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(n,i)}t.a=n.default.extend({methods:{removeClosetItem(){var e,t=this;return(e=function*(){try{yield t.$confirm(t.$t("user.removeFromClosetNotice"),{type:"warning"})}catch(e){return}const e=yield t.$http.post("/user/closet/remove",{tid:t.tid}),s=e.errno,n=e.msg;0===s?(t.$emit("item-removed"),t.$message.success(n)):t.$message.warning(n)},function(){var t=this,s=arguments;return new Promise(function(n,a){var r=e.apply(t,s);function o(e){i(r,n,a,o,l,"next",e)}function l(e){i(r,n,a,o,l,"throw",e)}o(void 0)})})()}}})}}]);